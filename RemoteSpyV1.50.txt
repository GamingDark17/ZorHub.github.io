---[ Library ]---

local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Remote Spy V1.50 | Free                                            dsc.gg/nqP5Kfabxb", "Ocean")

---[ Loading Information ]---

print("|| REMOTE SPY V1.50 LOADING.. ||")
task.wait(0.7)
print("|| REMOTE SPY V1.50 LOADED! ✅||")
task.wait(0.2)
print("By Aptros")

game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "REMOTE SPY V1.50 LOADED! ✅",
    Text = "By Aptros",
    Duration = 5,  -- Duration in seconds
    Icon = "rbxassetid://4483345998" -- Replace with your image ID
})

---[ Tabs & Sections ]---

local Tab = Window:NewTab("Main")
local Section = Tab:NewSection("Main")

---[ Buttons ]---

Section:NewButton("Discord Link", "Copies the discord invite link", function()
    setclipboard("https://discord.gg/nqP5Kfabxb")
end)

Section:NewLabel("⚠️ Script can be bugged sometimes")

---[ Variables ]---

local ReplicatedStorage = game:GetService("ReplicatedStorage")

local excludedEvents = {}
local remoteConnections = {}

---[ Functions ]---

local function spyOnRemoteEvent(remoteEvent)
    if excludedEvents[remoteEvent] then return end

    local connection
    connection = remoteEvent.OnClientEvent:Connect(function(...)
        if excludedEvents[remoteEvent] then
            if connection then connection:Disconnect() end
            return
        end

        local args = { ... }  
        local remoteEventPath = remoteEvent:GetFullName()

        local Tab = Window:NewTab(remoteEvent.Name)
        local Section = Tab:NewSection(remoteEvent.Name)

        Section:NewButton("Exclude", "Exclude Remote", function()
            excludedEvents[remoteEvent] = true

            if remoteConnections[remoteEvent] then
                remoteConnections[remoteEvent]:Disconnect()
                remoteConnections[remoteEvent] = nil
            end

            game:GetService("StarterGui"):SetCore("SendNotification", {
                Title = "REMOTE EXCLUDED! ✅",
                Text = remoteEvent.Name .. " HAS BEEN EXCLUDED",
                Duration = 5,
                Icon = "rbxassetid://4483345998"
            })
        end)

        Section:NewButton("Copy Script", "Copies the remote call", function()
            local function formatValue(v)
                if type(v) == "string" then
                    return string.format("\"%s\"", v) -- Wrap strings in quotes
                elseif type(v) == "table" then
                    return "{ ... }" -- Placeholder for complex tables
                else
                    return tostring(v)
                end
            end
        
            local argsText = {}
        
            for i, v in pairs(args) do
                table.insert(argsText, string.format("    [%d] = %s,", i, formatValue(v)))
            end
        
            local formattedArgs = "{\n" .. table.concat(argsText, "\n") .. "\n}"
        
            local remoteCall
        
            if remoteEvent:IsA("RemoteEvent") then
                remoteCall = string.format([[
        local Args = %s
        
        game:GetService("ReplicatedStorage"):%s:FireServer(unpack(Args))
        ]], formattedArgs, remoteEvent:GetFullName())
        
            elseif remoteEvent:IsA("RemoteFunction") then
                remoteCall = string.format([[
        local Args = %s
        
        game:GetService("ReplicatedStorage"):%s:InvokeServer(unpack(Args))
        ]], formattedArgs, remoteEvent:GetFullName())
            else
                return
            end
        
            setclipboard(remoteCall)
        
            game:GetService("StarterGui"):SetCore("SendNotification", {
                Title = "✅ Copied to Clipboard!",
                Text = "Remote call copied successfully.",
                Duration = 3
            })
        
            print("Copied:\n" .. remoteCall)
        end)        

        local argsText = {}
        for _, v in pairs(args) do
            table.insert(argsText, tostring(v))
        end

        Section:NewLabel("RemoteEvent Path: " .. remoteEventPath)
        Section:NewLabel("RemoteEvent Name: " .. remoteEvent.Name)
        Section:NewLabel("Arguments: " .. table.concat(argsText, ", "))
    end)

    remoteConnections[remoteEvent] = connection
end

for _, remoteEvent in pairs(ReplicatedStorage:GetChildren()) do
    if remoteEvent:IsA("RemoteEvent") then
        spyOnRemoteEvent(remoteEvent)
    end
end

ReplicatedStorage.ChildAdded:Connect(function(child)
    if child:IsA("RemoteEvent") then
        spyOnRemoteEvent(child)
    end
end)

